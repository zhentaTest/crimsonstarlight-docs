# # SRPG 전투 룰 디자인 문서 v1.6
# 버전 이력
| **버전** | **날짜** | **변경 내용** |
|:-:|:-:|:-:|
| v1.0 | 2025-05-06 | • 최초 문서 작성<br>• SRPG 게임 전술 전투 v2.4에서 전투 룰 분리<br>• 종족 특성 반영<br>• 효과 지속시간 시스템 추가 |
| v1.1 | 2025-05-06 | • 기본 전투 시스템 검수 및 단순화<br>• SPD 정의 추가<br>• 무기 시스템 재검토<br>• 마법 명중률 명확화<br>• 직업 특성 표기 방식 수정<br>• 날씨/시간 시스템 제외 |
| v1.2 | 2025-05-06 | • 직업 특성 표기 형식 수정<br>• 상태이상 시스템 상세화<br>• 상태이상 효과 카테고리 분류<br>• 신규 상태이상 추가<br>• 상태이상 제약사항 정의 |
| v1.3 | 2025-05-08 | • 무기 피해 계산 시점 명확화<br>• 패시브 효과 적용 순서 정의<br>• 장비 특성 및 효과 적용 시점 명시<br>• 방어구 타입별 영향 상세화<br>• 액션 소모 규칙 추가<br>• 아이템 효과 계산 순서 체계화 |
| v1.4 | 2025-05-08 | • v1.2와 v1.3 내용 통합<br>• 누락된 섹션 복원 (지형 효과 시스템, 전투 코드 구조, 개선 및 보완 사항)<br>• 모든 섹션의 전체 내용 복원<br>• 문서 구조 재정립 및 통합 |
| v1.5 | 2025-05-09 | • 마법 무기 세부 규칙 명확화<br>• 액세서리 효과 중첩 규칙 추가<br>• 특수 패시브 효과 조합 규칙 상세화<br>• 특수 아이템 효과 액션 규칙 정의<br>• 상태이상 면역/저항과 장비 효과 상호작용 설명 추가 |
| v1.6 | 2025-05-09 | • v1.4와 v1.5 내용 완전 병합<br>• 모든 섹션 상세 내용 복원<br>• 새로운 규칙과 이전 규칙 통합<br>• 구조 일관성 개선<br>• 누락된 상세 설명 복원 |
# 1. 개요
본 문서는 SRPG 게임의 전투 시스템에 관한 핵심 규칙을 정의합니다. 파이어엠블렘 시리즈, 특히 '성전의 계보'의 전투 시스템을 참고하되 현대적으로 단순화하여 설계했습니다.
### 목적 및 범위
* 모든 전투 관련 계산식과 규칙 정의
* 종족 및 직업 특성이 전투에 미치는 영향 명시
* 효과 시스템(버프/디버프)의 기본 메커니즘 정립
* 전투 진행 순서 및 절차 표준화
* 아이템 효과와 전투 계산 간의 상호작용 정의

⠀2. 기본 전투 시스템
### 2.1 무기 시스템 개요
* **무기 유형**: 한손 무기, 양손 무기로 구분
* **무기 속성**: 물리/마법, 속성 유형(불/물/번개/대지 등) 보유 가능
* **공격 범위**: 근접(1칸), 원거리(2-3칸), 장거리(3-6칸)
* **무기 피해**: 표기된 주사위 값(예: 1d6)은 전투 시작 시 한 번 굴려 결정, 전투 중 동일 값 유지

⠀2.2 속도(SPD, Speed)
* **정의**: 유닛의 기본 행동 속도를 나타내는 기초 능력치
* **영향**: 공격 속도, 회피율, 선제공격 판정에 영향
* **범위**: 기본 1-20 (레벨 및 직업에 따라 성장)

⠀2.3 공격 속도(AS, Attack Speed)
AS = SPD - 무기패널티
* **무기패널티**:
  * 한손 무기: 0-2 (무기별 상이)
  * 양손 무기: 2-5 (무기별 상이)
* **영향**: 연속 공격(Double Attack), 회피(Avoid) 계산에 사용
* **특수 규칙**:
  * 중갑 착용시: AS에 20% 패널티
  * 특정 직업은 무기패널티 감소 특성 보유

⠀2.4 공격력(ATK / MATK)
ATK = STR + weapon.might (피해 주사위 굴림 결과) MATK = INT + (weapon.might + 마법 효과 증가치)
* **STR(Strength)**: 물리 공격의 기본 능력치
* **INT(Intelligence)**: 마법 공격의 기본 능력치
* **weapon.might**: 무기의 기본 공격력
  * 표기된 주사위(예: 1d6)는 전투 시작 시 한 번 굴려서 결정
  * 마법 무기의 경우, 셉터/마법봉/지팡이 등의 마법 효과 증가치가 추가됨

⠀2.5 명중률(Hit Rate)
물리 Hit = weapon.hit + (DEX × 2) + floor(LUK / 2) 마법 Hit = 100 (기본 명중)
* **DEX(Dexterity)**: 명중률과 회피율에 영향을 주는 민첩성 능력치
* **판정**: Hit - Avoid vs 난수(0~99)
* **특수 규칙**:
  * 기본적으로 마법은 100% 명중, 대상의 MDEF로 데미지 감소/저항
  * 특정 스킬/아이템은 마법 명중률에 예외 적용 가능

⠀2.6 회피(Avoid)
Avoid = AS × 2 + LUK
* **LUK(Luck)**: 회피, 치명타 등 확률 요소에 영향을 주는 능력치
* **방어구 영향**: 방어구 유형(경갑/중갑/중장갑)에 따라 회피율 수정치 적용

⠀2.7 치명타율(Crit Rate)
Crit = weapon.crit + floor(DEX / 2)
* **판정**: Crit - CritEvade vs 난수(0~99)
* **효과**: 기본 3배 데미지 (직업 특성에 따라 변동)

⠀2.8 치명타 회피(Crit Evade)
CritEvade = LUK
### 2.9 연속 공격(Double Attack)
if AS_attacker - AS_defender ≥ 4: 공격자는 추가 공격 1회 가능
### 2.10 데미지(Damage)
Damage_phys = max(1, ATK_att - DEF_def) // 최소 1 데미지 Damage_magic = max(1, MATK_att - MDEF_def) // 최소 1 데미지
* **DEF(Defense)**: 물리 공격에 대한 방어력
* **MDEF(Magic Defense)**: 마법 공격에 대한 저항력
* **특수 규칙**:
  * 기본 데미지 변동폭: ±10% (적절한 랜덤성 부여)
  * 종족 상성에 따른 최종 데미지 배율 적용

⠀3. 전투 진행 순서
### 3.1 전투 준비 단계
**1** **전투 초기화**
* 양측 유닛의 파생 능력치 계산
* 무기 피해(might) 주사위 굴림 실행 및 값 결정
* 장비 패시브 효과 적용
* 기존 상태이상/버프/디버프 확인

⠀3.2 공격 판정 단계
**1** **선제 공격 판정** **2** **명중 판정**
* 난수(0~99) < Hit - Avoid 확인 **3** **명중 시 치명타 판정**
* 난수(0~99) < Crit - CritEvade 확인

⠀3.3 데미지 계산 단계
**1** **기본 데미지 계산**
* 물리: ATK - DEF 또는 마법: MATK - MDEF **2** **치명타 시 데미지 배율 적용**
* 기본 3배 (직업 특성에 따라 변동 가능) **3** **무작위 변동 적용**
* 기본 ±10% **4** **종족 상성 배율 적용** **5** **최종 데미지 적용**
* 최소 1 보장

⠀3.4 연속 공격 및 반격 판정
**1** **연속 공격 판정**
* AS_attacker - AS_defender ≥ 4 확인
* 조건 충족 시 3.2~3.3단계 반복 **2** **반격 판정**
* 반격 가능 조건 확인 (무기 범위, 특수 효과 등)
* 가능할 경우 3.2~3.3단계를 반격자 기준으로 진행

⠀3.5 전투 종료 처리
**1** **HP 갱신 및 0 이하 확인** **2** **획득 경험치 계산** **3** **상태 효과 지속시간 갱신**
**중요**: 각 판정 단계에서는 충분한 난수 요소가 적용되어 전투의 다양성과 전략적 깊이를 보장합니다.
# 4. 장비 및 아이템 효과 적용 규칙
### 4.1 장비 효과 적용 순서
**1** **기본 능력치 설정** (레벨, 직업, 종족 기반) **2** **장비 기본 효과 적용** (무기 might, 방어구 DEF/MDEF 등) **3** **장비 추가 능력치 보정 적용** (STR+2, DEX+1 등) **4** **장비 패시브 특성 적용** (회피율 증가, 속성 저항 등) **5** **직업/종족 특성 적용** **6** **버프/디버프 적용** **7** **전투 시작 시 계산이 필요한 값 결정** (무기 주사위 굴림 등)
### 4.2 방어구 유형별 영향
| **방어구 유형** | **방어력 특성** | **AS 영향** | **회피율 영향** | **이동력 영향** |
|:-:|:-:|:-:|:-:|:-:|
| 경갑(Light) | DEF 낮음, MDEF 보통 | 없음 | 일부 +5% | 없음 |
| 중갑(Medium) | DEF 중간, MDEF 보통 | AS -20% | -2% ~ -7% | 없음 |
| 중장갑(Heavy) | DEF 높음, MDEF 보통 | AS -20% | -5% ~ -15% | -1 ~ -2 |
| 로브(Robe) | DEF 매우 낮음, MDEF 높음 | 없음 | 없음 | 없음 |
### 4.3 액세서리 효과 적용 시점
* **반지/목걸이의 능력치 증가**: 4.1의 3번 단계에서 적용
* **반지/목걸이의 특수 효과**:
  * 확률 기반 효과(치명타 확률+, 연속 공격 확률+ 등): 해당 판정 직전에 적용
  * 피해 감소/증가 효과: 최종 데미지 계산 직전에 적용
  * 턴 시작 시 효과(HP 회복 등): 턴 시작 시 적용

⠀4.4 소모성 아이템 사용 및 효과
* **소모성 아이템 사용 시점**: 유닛의 행동 턴에 액션으로 사용
* **효과 적용 시점**: 사용 즉시 효과 발생
* **지속 효과**: 지정된 턴 수 동안 매 턴 시작 시 효과 적용
* **중첩 규칙**: 동일 효과는 가장 강한 효과만 적용 (단, 다른 종류의 효과는 중첩 가능)

⠀4.5 마법 무기 세부 규칙
* **셉터(Scepter)**: 보유 시 기적 효과치 +1, 마법 주문의 회복 능력 10% 증가
  * 예시: 회복 주문 사용 시 기본 회복량 + (기본 회복량 × 10%)
* **마법봉(Wand)**: 보유 시 마법 효과 +1, 마법 주문의 데미지 5% 증가
  * 예시: 불 주문 사용 시 MATK + 1, 최종 데미지에 5% 추가 증가
* **지팡이(Staff)**: 보유 시 마법 효과 +2, 마법 주문의 데미지 10% 증가, DEX -2, MOV -1
  * 예시: 번개 주문 사용 시 MATK + 2, 최종 데미지에 10% 추가 증가
* **원소 지팡이(Elemental Staff)**: 지정 속성 마법 효과 +3, 해당 속성 마법 데미지 20% 증가, 주문 범위 +1, DEX -2, MOV -1
  * 예시: 화염 지팡이로 불 주문 사용 시 MATK + 3, 범위 +1, 최종 데미지에 20% 추가 증가
* **구슬 완드(Orb Wand)**: 지정 속성 마법 효과 +2, 해당 속성 마법 저항 +20%
  * 예시: 냉기 구슬 완드는 냉기 주문 사용 시 MATK + 2, 냉기 저항 20% 추가

⠀4.6 액세서리 효과 중첩 규칙
* **능력치 증가 효과**: 모든 장비의 능력치 증가 효과는 가산적으로 적용
  * 예시: STR +2 반지와 STR +3 목걸이 착용 시 총 STR +5 적용
* **확률 기반 효과**: 특별한 언급이 없으면 가산적으로 적용됨
  * 예시: 치명타 확률 +10% 반지와 치명타 확률 +5% 무기 사용 시 총 치명타 확률 +15% 적용
* **백분율 피해 증가/감소**: 단일 수치로 합산 후 적용
  * 예시: 물리 피해 감소 15% 효과와 물리 피해 감소 10% 효과 착용 시 총 물리 피해 감소 25% 적용
* **특수 효과 중첩 제한**:
  * 동일한 특수 효과(턴 시작 시 HP 회복 등)는 가장 높은 효과만 적용
  * 예시: HP 5% 회복 반지와 HP 3% 회복 목걸이 착용 시 턴 시작 시 HP 5%만 회복

⠀4.7 특수 패시브 조합 규칙
* **동일 종류 패시브 착용 시**:
  * 동일 타입 반지 2개 착용 경우: 상위 효과에 하위 효과의 50% 추가
  * 예시: 치명타 확률 +10% 반지와 치명타 확률 +6% 반지 착용 시 총 치명타 확률 +(10 + 6×0.5) = +13% 적용
* **복합 패시브 효과**: 서로 다른 종류의 패시브는 모두 완전히 적용
  * 예시: 치명타 확률 +10% 반지와 회피율 +15% 반지는 두 효과 모두 온전히 적용
* **승산 효과**: 특별히 "배율" 언급된 효과는 가산이 아닌 승산으로 적용
  * 예시: 데미지 ×1.5 효과와 데미지 ×1.2 효과는 데미지 ×1.8(1.5×1.2)로 적용

⠀5. 액션 소모 규칙
### 5.1 액션 소모 행위
각 유닛은 턴마다 하나의 액션을 수행할 수 있습니다:
* **이동**: 이동력 범위 내 이동
* **공격**: 무기 사용 공격
* **스킬 사용**: 액티브 스킬 사용
* **아이템 사용**: 소모성 아이템 사용

⠀5.2 액션 소모 없는 행위
다음 행위는 액션을 소모하지 않습니다:
* **대기**: 아무 행동 없이 턴 종료
* **상태 확인**: 자신 또는 다른 유닛의 상태 확인
* **지형 확인**: 지형 정보 확인
* **장비 교체**: 인벤토리 내 장비 교체 (전략 모드에서만 가능)

⠀5.3 특수 액션 규칙
* **이동 후 공격**: 일부 직업은 이동 후 공격 가능 (예: 기마병 계열)
* **이동 없이 아이템 사용 후 공격**: 불가능 (한 턴에 하나의 액션만 가능)
* **연속 공격**: 공격 액션 내에서 자동으로 처리 (추가 액션 미소모)
* **추가 행동 효과**: 시공간 반지 등의 "추가 행동" 효과는 턴 종료 시 20% 확률로 체크하여 발동 시 즉시 행동 가능
  * 예시: 시공간 반지 착용 유닛이 턴을 종료할 때 20% 확률로 추가 액션 1회 획득
  * 추가 획득한 액션으로도 모든 행동(이동, 공격, 스킬, 아이템) 사용 가능
  * 한 턴에 최대 1회만 발동 가능 (연쇄 발동 불가)
* **즉시 반응 효과**: 회피 기동 목걸이 등의 "확률적 회피" 효과는 피격 판정 시 발동
  * 예시: 회피 기동 목걸이 착용 유닛이 공격 받을 때 회피 판정 실패 시 20% 확률로 2차 회피 판정

⠀6. 종족 특성 및 전투 영향
### 6.1 인간(Human)
* **균형형 종족**: 기본 종족, 특별한 보너스/패널티 없음
* **직업 적성**: 모든 직업군 접근 가능
* **기사의 혈통**: 기사 계열 직업 선택 시 DEF +3, MDEF +2 추가 보너스

⠀6.2 언데드(Undead)
* **철벽 방어**: DEF +3
* **두 번째 생명**: 받는 더블 어택 확률 감소 (2회 공격 중 1회만 적용)
* **화염 취약**: 화염 속성 공격에 취약 (1.5배 데미지)
* **생명력 구조 차이**: 일반 회복 마법 효과 없음, 언데드 전용 회복 스킬로만 회복 가능

⠀6.3 마법 생물(Magical Beast)
* **마법 저항**: MDEF +3
* **빠른 이동**: MOV +1
* **물리 취약성**: DEF -3
* **속성 친화**: 특정 속성에 저항/취약점 보유

⠀6.4 용족(Draconic)
* **자연 재생**: 턴 시작 시 최대 HP의 5% 회복
* **용의 숨결**: 해당 속성 용족은 관련 속성 공격에 강한 저항, MDEF 증가
* **비행**: 지상 공격 범위 +2
* **위압감**: 주변 적 유닛에게 명중률/회피율 -5 효과

⠀6.5 원소족(Elemental)
* **원소 일치 면역**: 동일 속성 공격에 면역
* **대립 원소 취약**: 대립 속성 공격에 2배 데미지
* **물리 저항**: 받는 물리 데미지 20% 감소
* **속성 다양성**: 각 속성별 추가 특성 존재

⠀6.6 기계족(Mechanical)
* **강화 프레임**: STR +5
* **단단한 외피**: DEF +10, MDEF +5
* **기계적 구조**: 일반 회복 마법 효과 없음, 수리 스킬로만 회복 가능
* **회로 취약점**: 전기/뇌격 속성 공격에 1.5배 데미지

⠀7. 공격 타입별 특성
### 7.1 근접형(Melee)
* **직접 타격**: 1칸 범위 공격
* **물리 우세**: 물리 공격력 추가 보너스
* **방어 관통**: 일부 무기는 대상 DEF의 일정 비율 무시 가능

⠀7.2 원거리형(Ranged)
* **사격 범위**: 2~3칸 공격 범위
* **안전 거리**: 근접 공격자에게 반격 받지 않음
* **지형 활용**: 특정 지형에서 명중률 보너스

⠀7.3 장거리형(Long Range)
* **장거리 공격**: 3~6칸 공격 범위
* **정확도 저하**: 기본 명중률 -30%
* **일방 공격**: 반격 받지 않고 반격도 불가능

⠀7.4 복합형(Hybrid)
* **적응형 전투**: 1~3칸 공격 범위
* **다양한 공격**: 물리/마법 공격 전환 가능
* **약점 공략**: 대상의 DEF/MDEF 중 낮은 쪽으로 공격

⠀7.5 마법형(Magic)
* **마력 공격**: INT 기반 데미지 계산
* **저항 기반**: 대상의 MDEF로 데미지 감소
* **속성 효과**: 속성별 다양한 추가 효과

⠀7.6 지원형(Support)
* **회복과 강화**: 아군 회복 및 버프 제공
* **사기 증진**: 주변 아군에게 명중률/회피율 보너스
* **상태 활용**: 직접 공격보다 상태 효과 중심

⠀8. 직업 특성 및 전투 영향
### 8.1 상위 직업 전투 특성
각 직업은 고유한 전투 보너스와 특성을 가집니다:
**기사 계열**
* **기사(Knight)**: 「철벽 수비」 DEF +3, MDEF +2
* **수호자(Defender)**: 「방패 방어」 30% 확률로 받는 피해 감소
* **성기사(Paladin)**: 「신성한 보호」 방어력 +3, 물리 내성 +20%, 마법 내성 +30%

⠀**전사 계열**
* **검성(Swordmaster)**: 「정밀 타격」 연속 공격 데미지 1.5배, DEX 영향력 1/3 증가
* **영웅(Hero)**: 「영웅의 기개」 치명타 확률 30% + LUK% 추가
* **결투가(Duelist)**: 「연속 타격」 첫 공격 80% 명중, 이후 공격마다 명중률 점차 감소
* **광전사(Berserker)**: 「광기」 공격력 ×2, DEF ×2 감소, 반격 불가

⠀**궁수 계열**
* **저격수(Sniper)**: 「치명적 조준」 데미지 1.5배 (원거리에서 3배)
* **레인저(Ranger)**: 「자연 친화」 이동력 +2 (숲에서 추가 +2)
* **스트라이더(Strider)**: 「그림자 이동」 50% 확률로 반격 회피

⠀**마법사 계열**
* **현자(Sage)**: 「마법 증폭」 마법 공격 범위 +3
* **원소술사(Elementalist)**: 「원소 지배」 속성별 추가 효과
* **흑마도사(Warlock)**: 「금단의 마법」 어둠/불/번개/죽음 속성 마법 2배 데미지

⠀**성직자 계열**
* **여사제(Priestess)**: 「신성한 빛」 범위 내 아군 회복, 적 약화, 버프 제거
* **성인(Saint)**: 「축복의 기적」 30% 확률로 상태이상 회복 효과 추가

⠀**도적 계열**
* **암살자(Assassin)**: 「그림자 일격」 80% 치명타, 30% 연속 공격 확률
* **트릭스터(Trickster)**: 「혼란 전술」 AI 혼란, 버프 복제, 디버프 반사
* **검무사(BladeDancer)**: 「연속검무」 연속 공격 시마다 명중률 감소

⠀9. 효과 시스템
### 9.1 효과 기본 메커니즘
### {
###   "effectId": "effect_001",
###   "name": "화상",
###   "type": "debuff",
###   "duration": 3,
###   "stackable": false,
###   "maxStack": 1,
###   "target": "enemy",
###   "effects": {
###     "dot": {"value": 5, "type": "percent_max_hp"},
###     "statMod": {"stat": "def", "value": -2, "type": "flat"}
###   }
### }
### 9.2 시간 기반 효과 (턴 제한 효과)
* **지속시간**: 효과별로 1~10턴 범위 내 지정
* **턴 감소**: 대상 유닛의 턴 시작 시 1씩 감소
* **해제 조건**: 지속시간 0 도달 시 자동 해제
* **중첩 규칙**: 효과별 중첩 가능 여부 및 최대 스택 지정

⠀9.3 영구 효과
* **조건**: 장비 착용, 직업 특성, 종족 특성에 의한 지속 효과
* **중첩 규칙**: 동일 출처 효과는 모두 합산 적용

⠀10. 종족 간 상성 시스템
### 10.1 상성 데미지 적용
종족 간 상성은 기본 전투 시스템의 최종 단계에서 데미지 배율로 적용됩니다:
### 최종_데미지 = 기본_데미지 × 종족_상성_배율
* **적용 시점**: 모든 데미지 계산(치명타 포함) 이후, 최종 단계에서 적용
* **최소 데미지**: 상성 적용 후에도 최소 1 데미지 보장

⠀10.2 상성표
| **공격\방어** | **인간** | **언데드** | **마법생물** | **용족** | **원소족** | **기계족** |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| 인간 | 100% | 100% | 100% | 85% | 120% | 100% |
| 언데드 | 120% | 100% | 100% | 85% | 100% | 110% |
| 마법생물 | 115% | 85% | 100% | 70% | 115% | 100% |
| 용족 | 130% | 70% | 100% | 100% | 85% | 120% |
| 원소족 | 110% | 130% | 70% | 85% | 특수 | 120% |
| 기계족 | 100% | 130% | 85% | 90% | 100% | 70% |
**참고**:
* 원소족 간 상성은 속성에 따라 별도 정의됩니다.
* 기계족은 전기 속성 공격에 특히 취약합니다 (150%).

⠀11. 지형 효과 시스템
### 11.1 지형별 보너스/패널티
* **회피 보너스**: 숲 +20%, 산 +15%, 물 -10%
* **이동 패널티**: 숲 -1, 산 -2, 물 -3, 황무지 -1
* **종족 특성**: 특정 종족은 지형별 특수 보너스/패널티
* **회복 효과**: 특정 지형에서 턴 시작 시 HP 회복

⠀12. 상태이상 시스템
### 12.1 상태이상 카테고리
상태이상은 다음과 같은 카테고리로 분류됩니다: **1** **물리 공격에 의한 상태이상**: 물리 공격 명중 시 발동 가능한 상태이상 **2** **마법 공격에 의한 상태이상**: 마법 공격에 의해 발동되는 상태이상 **3** **아이템에 의한 상태이상**: 소모성 아이템 사용으로 발동되는 상태이상
### 12.2 상태이상 기본 속성 리스트
**행동 제한형 상태이상**
* **기절(Stun)**: 행동 불가
  * **제약**: 물리/마법/아이템으로 적용 가능
  * **효과**: 액션 및 컨트롤 불가능 상태, 스킬 효과로 시간이 정의됨
* **침묵(Silence)**: 마법 사용 불가
  * **제약**: 마법/아이템으로 적용 가능
  * **효과**: 마법 사용이 불가능, 마법을 사용하지 않는 직업에게는 효과 없음
* **장님(Blindness)**: 이동 불가, 회피율 -50%
  * **제약**: 마법/아이템으로 적용 가능
  * **효과**: 이동 불가, 명중률 크게 감소, 회피율 반감
* **동결(Freeze)**: 행동 불가, 받는 물리 데미지 25% 증가
  * **제약**: 물속성 마법으로 적용 가능
  * **효과**: 행동 불가, 물리 공격에 취약

⠀**지속 피해형 상태이상**
* **중독(Poison)**: 턴마다 최대 HP의 5% 피해
  * **제약**: 물리 공격/아이템으로 적용 가능
  * **효과**: 턴마다 지속적인 HP 감소
* **죽음의 독(Death Venom)**: 턴마다 최대 HP의 30% 피해
  * **제약**: 마법으로만 적용 가능
  * **효과**: 턴마다 심각한 HP 감소, 제거가 어려움
* **출혈(Bleeding)**: 턴마다 현재 HP의 10% 피해
  * **제약**: 물리 공격으로만 적용 가능
  * **효과**: 현재 HP 기준으로 피해, HP가 적을수록 피해 감소
* **화상(Burn)**: 턴마다 최대 HP의 8% 피해, MDEF -2
  * **제약**: 불속성 마법으로 적용 가능
  * **효과**: 지속 피해 및 마법 방어력 감소

⠀**능력치 감소형 상태이상**
* **감전(Electrocution)**: 회피 -30%, 방어 -30%, 이동 -2, 공격 명중 -50%
  * **제약**: 번개속성 마법으로 적용 가능
  * **효과**: 전반적인 전투 능력 대폭 감소

⠀12.3 상태이상 효과 예시 (장비)
### 아이템 명: 공포의 마비 강철 창
### 아이템 유형: 장비
### 장비 유형: 무기
### 무기 유형: 양손 무기
### 방어도: -
### 마법 방어도: -
### 저항 속성: -
### 효과 단위: -
### 효과 범위: -
### 효과 시간: -

### 특성 1:
### 상태 이상 효과: 기절
### 상태 이상 발동 효과: 적 명중 시 10% 확률
### 상태 이상 효과 시간: 1 턴
### 특이 사항: 없음
### 12.4 상태이상과 직업/종족 특성 간 상호작용 제안
**종족별 상태이상 내성 및 취약점** **1** **인간(Human)**
* 모든 상태이상에 표준 저항력
* 특정 직업 선택 시 특정 상태이상 저항 보너스 (예: 성기사는 침묵 면역) **2** **언데드(Undead)**
* **면역**: 중독, 출혈, 죽음의 독
* **취약**: 화상(지속시간 +1턴)
* **저항**: 기절(지속시간 -1턴) **3** **마법 생물(Magical Beast)**
* **면역**: 침묵(마법형 제외)
* **취약**: 동결(지속시간 +1턴)
* **저항**: 화상(데미지 50% 감소) **4** **용족(Draconic)**
* **면역**: 해당 속성의 상태이상(예: 화염 용족은 화상 면역)
* **취약**: 상대 속성의 상태이상(예: 화염 용족은 동결 지속시간 +2턴)
* **저항**: 감전(확률 50% 감소) **5** **원소족(Elemental)**
* **면역**: 자신의 속성과 관련된 상태이상
* **취약**: 대립 속성의 상태이상(확률 +30%)
* **저항**: 물리적 상태이상(출혈, 기절 확률 -30%) **6** **기계족(Mechanical)**
* **면역**: 중독, 출혈, 죽음의 독
* **취약**: 감전(확률 +50%, 지속시간 +2턴)
* **저항**: 화상, 동결(데미지 50% 감소)

⠀**직업별 상태이상 내성 및 특성** **1** **기사 계열**
* 수호자(Defender): 팀원 상태이상 확률 -20%(인접한 아군)
* 성기사(Paladin): 턴마다 30% 확률로 아군 상태이상 제거 **2** **전사 계열**
* 광전사(Berserker): 상태이상 중에도 공격 가능(데미지 50%)
* 영웅(Hero): 첫 번째 상태이상 1턴으로 제한 **3** **마법사 계열**
* 현자(Sage): 적용 시 50% 확률로 상태이상 효과 2배(지속시간 또는 효과)
* 원소술사(Elementalist): 속성 상태이상 지속시간 +1턴 **4** **성직자 계열**
* 여사제(Priestess): 범위 내 아군 상태이상 치유
* 성인(Saint): 상태이상 전이(자신이 받은 상태이상을 공격자에게 전이) **5** **도적 계열**
* 암살자(Assassin): 공격 시 상태이상 확률 +20%
* 트릭스터(Trickster): 상태이상 반사(50% 확률로 공격자에게 반사)

⠀**구현 방식**
### // 상태이상 적용 전 저항 체크
### public bool CheckResistance(Unit target, StatusEffectType effectType, float baseChance)
### {
###     // 종족 면역 체크
###     if (IsRaceImmune(target.Race, effectType))
###         return false;

###     // 직업 면역 체크
###     if (IsJobImmune(target.Job, effectType))
###         return false;

###     // 장비 면역 체크
###     if (HasImmunityFromEquipment(target, effectType))
###         return false;

###     // 적용 확률 계산
###     float finalChance = baseChance;

###     // 종족 저항/취약 적용
###     finalChance = ApplyRaceResistanceModifier(target.Race, effectType, finalChance);

###     // 직업 저항/취약 적용
###     finalChance = ApplyJobResistanceModifier(target.Job, effectType, finalChance);

###     // 장비 저항 적용
###     finalChance = ApplyEquipmentResistanceModifier(target, effectType, finalChance);

###     // 최종 확률 판정
###     return Random.Range(0f, 100f) < finalChance;
### }

### // 상태이상 지속시간 계산
### public int CalculateDuration(Unit target, StatusEffectType effectType, int baseDuration)
### {
###     int finalDuration = baseDuration;

###     // 종족 기반 지속시간 수정
###     finalDuration = ApplyRaceDurationModifier(target.Race, effectType, finalDuration);

###     // 직업 기반 지속시간 수정
###     finalDuration = ApplyJobDurationModifier(target.Job, effectType, finalDuration);

###     // 장비 기반 지속시간 수정
###     finalDuration = ApplyEquipmentDurationModifier(target, effectType, finalDuration);

###     // 최소 1턴 보장
###     return Mathf.Max(1, finalDuration);
### }
### 12.5 상태이상 면역/저항과 장비 효과 상호작용
* **면역 우선 규칙**: 종족이나 직업 특성, 장비에 의한 상태이상 면역은 모든 저항 계산에 우선함
  * 예시: 언데드 종족은 중독 면역이 있어 중독 저항 계산 자체가 생략됨
* **저항 계산식**: 상태이상 저항 = 기본 저항(종족/직업) + 장비 저항
  * 예시: 기본 마비 저항 10% + 장비 마비 저항 30% = 총 마비 저항 40%
* **저항 중첩 방식**: 장비 저항 효과는 가산적으로 적용되며, 최대 90%까지 제한
  * 예시: 기본 화상 저항 30% + 화염 저항 반지(40%) + 저주 보호 목걸이(20%) = 90% (제한)
* **지속시간 감소 효과**: 저주 보호 목걸이 등의 "상태이상 지속시간 감소" 효과는 최종 지속시간에서 차감
  * 예시: 5턴 지속 기절 효과 + 상태이상 지속시간 -1턴 효과 = 최종 4턴 기절
* **특수 상호작용**:
  * 같은 종류의 상태이상 저항 아이템 2개 착용: 높은 수치의 100% + 낮은 수치의 50% 적용
  * 예시: 마비 저항 40% 반지와 마비 저항 20% 목걸이 착용 시 총 마비 저항 = 40% + (20% × 0.5) = 50%

⠀13. 전투 코드 구조 (Unity C# 기반)
### 13.1 핵심 클래스 구조
### // 기본 유닛 클래스
### public class Unit
### {
###     // 기본 능력치 및 상태
###     public int Level { get; private set; }
###     public int HP { get; set; }
###     public int MaxHP { get; private set; }
###     public int STR { get; private set; }
###     public int DEX { get; private set; }
###     public int INT { get; private set; }
###     public int DEF { get; private set; }
###     public int MDEF { get; private set; }
###     public int SPD { get; private set; }
###     public int LUK { get; private set; }
###     public int MOV { get; private set; }

###     // 종족 및 직업 정보
###     public RaceType Race { get; private set; }
###     public JobType Job { get; private set; }

###     // 장비 및 효과
###     public Equipment[] EquippedItems { get; private set; }
###     public List<Effect> ActiveEffects { get; private set; }

###     // 파생 능력치 계산
###     public int CalculateAS()
###     {
###         int weaponPenalty = GetWeaponPenalty();
###         int baseSPD = SPD;

###         // 종족, 직업, 효과 등에 따른 보정
###         foreach (var effect in ActiveEffects)
###         {
###             if (effect.AffectsStat("SPD"))
###                 baseSPD = effect.ApplyTo(baseSPD);
###         }

###         // 최종 공격 속도 계산
###         int finalAS = Mathf.Max(0, baseSPD - weaponPenalty);

###         // 중갑 패널티 적용
###         if (HasHeavyArmor())
###             finalAS = Mathf.RoundToInt(finalAS * 0.8f);

###         return finalAS;
###     }

###     // 기타 능력치 계산 메서드들...
### }

### // 전투 관리자 클래스
### public class CombatManager
### {
###     // 전투 시작
###     public CombatResult StartCombat(Unit attacker, Unit defender)
###     {
###         // 1. 전투 초기화
###         PrepareCombat(attacker, defender);

###         // 2. 공격 판정 및 처리
###         ProcessAttack(attacker, defender);

###         // 3. 연속 공격 판정
###         if (CanDoubleAttack(attacker, defender) && attacker.HP > 0)
###             ProcessAttack(attacker, defender);

###         // 4. 반격 판정
###         if (CanCounterAttack(defender, attacker) && defender.HP > 0)
###             ProcessAttack(defender, attacker);

###         // 5. 전투 결과 반환
###         return GenerateCombatResult();
###     }

###     // 개별 공격 처리
###     private void ProcessAttack(Unit attacker, Unit defender)
###     {
###         // 명중 판정
###         if (IsHit(attacker, defender))
###         {
###             // 데미지 계산
###             int damage = CalculateDamage(attacker, defender);

###             // 치명타 판정
###             if (IsCritical(attacker, defender))
###                 damage = ApplyCriticalMultiplier(damage, attacker);

###             // 랜덤 변동 적용
###             damage = ApplyRandomVariation(damage);

###             // 종족 상성 적용
###             damage = ApplyRaceCompatibility(damage, attacker.Race, defender.Race);

###             // 최종 데미지 적용 (최소 1)
###             ApplyDamage(defender, Mathf.Max(1, damage));

###             // 효과 처리
###             ProcessEffects(attacker, defender);
###         }
###     }

###     // 상태이상 처리
###     private void ApplyStatusEffect(Unit target, StatusEffect effect)
###     {
###         // 면역 체크
###         if (IsImmuneToStatusEffect(target, effect.Type))
###             return;

###         // 확률 체크
###         if (UnityEngine.Random.Range(0, 100) < effect.Chance)
###         {
###             // 상태이상 적용
###             StatusEffectManager.Instance.ApplyEffect(target, effect);
###         }
###     }
### }

### // 상태이상 관리 클래스
### public class StatusEffectManager
### {
###     // 싱글톤 인스턴스
###     public static StatusEffectManager Instance { get; private set; }

###     // 상태이상 적용
###     public void ApplyEffect(Unit target, StatusEffect effect)
###     {
###         // 기존 효과와 중첩 확인
###         StatusEffect existingEffect = target.StatusEffects.Find(e => e.Type == effect.Type);

###         if (existingEffect != null)
###         {
###             // 스택 가능 여부 확인
###             if (effect.IsStackable && existingEffect.CurrentStack < effect.MaxStack)
###             {
###                 existingEffect.IncreaseStack();
###                 existingEffect.ResetDuration();
###             }
###             else
###             {
###                 // 지속시간 갱신
###                 existingEffect.ResetDuration();
###             }
###         }
###         else
###         {
###             // 새 효과 추가
###             target.StatusEffects.Add(new StatusEffect(effect));
###         }

###         // 시각 효과 적용
###         ApplyVisualEffect(target, effect.Type);
###     }

###     // 상태이상 업데이트 (턴 시작 시)
###     public void UpdateStatusEffects(Unit unit)
###     {
###         for (int i = unit.StatusEffects.Count - 1; i >= 0; i--)
###         {
###             StatusEffect effect = unit.StatusEffects[i];

###             // 지속 효과 처리 (DoT, HoT 등)
###             ProcessOngoingEffect(unit, effect);

###             // 지속시간 감소
###             if (effect.HasDuration)
###             {
###                 effect.DecreaseDuration();

###                 if (effect.RemainingDuration <= 0)
###                 {
###                     // 효과 제거
###                     unit.StatusEffects.RemoveAt(i);
###                     RemoveVisualEffect(unit, effect.Type);
###                 }
###             }
###         }
###     }
### }
# 14. 직업별 장비 착용 제한
### 14.1 기본 직업(Basic) 장비 제한
| **직업** | **사용 가능 무기** | **사용 가능 방어구** |
|:-:|:-:|:-:|
| 전사(Fighter) | 모든 한손/양손 무기 (마법 무기 제외) | 모든 방어구 (로브 제외) |
| 용병(Mercenary) | 한손 무기, 일부 양손 무기(그레이트소드 제외) | 경갑, 중갑 |
| 궁수(Archer) | 활, 쇼트보우, 크로스보우 | 경갑 |
| 마법사(Mage) | 마법 무기 | 로브 |
| 성직자(Cleric) | 마법 무기, 일부 한손 무기(메이스, 모닝스타) | 로브, 경갑 |
| 도적(Thief) | 한손 무기(단검, 숏소드, 시미터, 레이피어) | 경갑 |
### 14.2 상위 직업(Advanced) 장비 제한
| **직업** | **사용 가능 무기** | **사용 가능 방어구** |
|:-:|:-:|:-:|
| 기사(Knight) | 모든 한손/양손 무기 (마법 무기 제외) | 모든 방어구 (로브 제외) |
| 수호자(Defender) | 한손 무기, 방패 필수 | 중갑, 중장갑 |
| 성기사(Paladin) | 한손/양손 무기, 일부 마법 무기 | 모든 방어구 |
| 검성(Swordmaster) | 한손 무기(검 계열) | 경갑, 중갑 |
| 영웅(Hero) | 모든 한손 무기 | 경갑, 중갑 |
| 결투가(Duelist) | 한손 무기(검 계열) | 경갑 |
| 광전사(Berserker) | 모든 양손 무기 | 경갑, 중갑 |
| 저격수(Sniper) | 롱보우, 크로스보우 | 경갑 |
| 레인저(Ranger) | 모든 활, 한손 무기 | 경갑 |
| 스트라이더(Strider) | 모든 활, 단검 | 경갑 |
| 현자(Sage) | 모든 마법 무기 | 로브 |
| 원소술사(Elementalist) | 원소 속성 마법 무기 | 로브 |
| 흑마도사(Warlock) | 어둠/불/번개 속성 마법 무기 | 로브 |
| 여사제(Priestess) | 마법 무기, 일부 한손 무기(메이스, 모닝스타) | 로브, 경갑 |
| 성인(Saint) | 마법 무기, 일부 한손 무기(메이스, 모닝스타) | 로브, 경갑 |
| 암살자(Assassin) | 단검, 낫 | 경갑 |
| 트릭스터(Trickster) | 단검, 마법 무기 | 경갑, 로브 |
| 검무사(BladeDancer) | 검 계열 무기 | 경갑 |
# 15. 개선 및 보완 사항
### 15.1 기본 전투 시스템 검수 결과
**1** **무한 루프 위험요소**:
* 공격력과 방어력이 동일할 경우 1 데미지 보장으로 해결
* 회복과 데미지가 균형을 이룰 경우의 처리 필요 (최대 전투 턴수 제한 추가 필요) **2** **랜덤 요소 검토**:
* 명중/회피, 치명타/회피, 데미지 변동(±10%)에 적절한 랜덤성 존재
* 직업 특성의 확률적 요소(30%, 50% 등)도 전략적 변수 제공

⠀15.2 추가 보완이 필요한 사항
**1** **속성 데미지 시스템**의 세부 체계화 **2** **스킬 시스템**과의 연동 **3** **아이템/장비 설계**와 전투 룰 연계 **4** **특수 지형 상호작용** 상세화
# 질문 및 검토 필요 사항
1 현재 정의된 상태이상 시스템이 직업 및 종족 특성과 적절하게 통합되는지 검토가 필요합니다.
2 직업과 종족별 상태이상 상호작용이 게임 밸런스에 미치는 영향을 평가해야 합니다.
3 상태이상의 시각적 표현 방식과 사용자 인터페이스 통합에 대한 검토가 필요합니다.
4 전투 시스템과 스킬/아이템 시스템 간의 인터페이스 설계가 필요합니다.
5 종족 상성, 상태이상, 특수 능력을 고려했을 때 예상되는 전투 길이와 복잡성이 적절한지 검토가 필요합니다.
